var lines,nVL,vArr,nHL,hArr,numRec,stX,stY,enX,enY,tempstX,tempstY;function windowResized(){resizeCanvas(windowWidth,windowHeight)}function setup(){canvas=createCanvas(windowWidth,windowHeight),canvas.position(0,0),canvas.style("z-index","-1"),canvas.style("opacity",".4 "),resetVars(),resetConnections(),noLoop(),frameRate(1)}function draw(){background("white"),drawBaseLines(),fillMondrian()}function drawBaseLines(){strokeWeight(5),drawVertical(),drawHorizontal()}function fillColor(){var n=["#ffcb21","#537bbe","#e44240"];fill(n[floor(random(n.length))])}function mousePressed(){clear(),resetVars(),resetConnections(),redraw()}function resetVars(){nVL=Math.floor(Math.random(5))+8,vArr=new Array(nVL+1),nHL=Math.floor(Math.random(5))+6,hArr=new Array(nHL+1)}function resetConnections(){indexFilled=new Array(nVL);for(var n=0;n<nVL;n++)indexFilled[n]=new Array(nHL);for(var r;n<nVL;)for(;r<nHL;)indexFilled[n][r]=!0}function drawVertical(){for(var n=0;n<nVL;n++)lines=0==n?random(windowWidth/3):random(windowWidth/3)+vArr[n-1]+15,vArr[n]=lines,stroke("black"),line(lines,0,lines,height)}function drawHorizontal(){for(var n=0;n<nHL;n++)lines=0==n?random(windowHeight/3):random(windowHeight/3)+hArr[n-1]+15,hArr[n]=lines,stroke("black"),line(0,lines,width,lines)}function randomPos(){stX=Math.floor(random(nVL-2)),stY=Math.floor(random(nHL-2)),enX=Math.floor(random(nVL-stX-2))+stX+1,enY=Math.floor(random(nHL-stY-2))+stY+1,tempstX=stX,tempstY=stY}function fillRectangle(){for(var n;stY<enY;){for(stX=tempstX;stX<enX;)indexFilled[stX][stY]&&(n=!0),stX++;stY++}if(stX=tempstX,stY=tempstY,!n)for(rect(vArr[stX],hArr[stY],vArr[enX]-vArr[stX],hArr[enY]-hArr[stY]);stY<enY;){for(stX=tempstX;stX<enX;)indexFilled[stX][stY]=!0,stX+=1;stY+=1}}function fillMondrian(){for(numRec=0;numRec<random(100)+10;)numRec++,fillColor(),randomPos(),fillRectangle()}
